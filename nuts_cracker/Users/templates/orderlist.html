{% extends 'index.html' %}
{% load static %}
{% load custom_filters %}

{% block main %}
<div class="container mt-5">
  <h1 class="mb-4">Your Orders</h1>

  {% if orders %}
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Image</th>
          <th>Product</th>
          <th>Status</th>
          <th>Total Price</th>
          <th>Payment Method</th>
          <th>Date</th>
          <th>Expected Delivery Date</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
        <tr>
         
          <td>
            {% if order.product.image and order.product.image.url|file_exists %}
            <img src="{{ order.product.image.url }}" alt="{{ order.product.title }}"
                style="width: 50px; height: auto;">
            {% else %}
            <img src="{% static 'img/placeholder.jpeg' %}" alt="Image not available"
                style="width: 50px; height: auto;">
            {% endif %}
        </td>

          <td>{{ order.product.title }}</td>
          <td>
            {% if order.status == 'cancelled' %}
            <span class="badge bg-danger">{{ order.get_status_display }}</span>
            {% elif order.status == 'dispatched' %}
            <span class="badge bg-warning">{{ order.get_status_display }}</span>
            {% elif order.status == 'delivered' %}
            <span class="badge bg-success">{{ order.get_status_display }}</span>
            {% else %}
            <span class="badge bg-info">{{ order.get_status_display }}</span>
            {% endif %}
          </td>
          <td>â‚¹{{ order.totel_price }}</td>
          <td>{{ order.get_payment_method_display }}</td>
          <td>{{ order.date|date:"F j, Y, g:i a" }}</td>
          <td>{{ order.expected_delivery_date|date:"F j, Y" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="d-flex flex-column align-items-center justify-content-center text-center mt-5">
    <img src="{% static 'img/empty-orders-image.png' %}" alt="No Orders" style="width: 300px; height: auto; margin-bottom: 15px;"> <!-- Increased size -->
    <h5 class="m-0 fs-4">No Orders Yet!</h5>
    <p  class="m-0 fs-5">It looks like you haven't placed any orders. Start shopping now!</p>
    <a href="{% url 'index' %}" class="btn btn-info" style="margin-top: 10px;">Go to Shop</a>
</div>

{% endif %}
</div>
{% endblock %}