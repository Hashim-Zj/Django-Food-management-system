{% extends 'base.html' %}

{% block main %}
<main class="container mt-5">
  <section class="row justify-content-center">
    <div class="col-md-8">
      <h2 class="mb-4">Edit Product: {{ form.instance.title }}</h2>

      <!-- Form begins here -->
      <form method="POST" enctype="multipart/form-data" novalidate class="mb-4">
        {% csrf_token %}
        <fieldset class="border p-4 rounded">
          <legend class="w-auto px-2">Product Details</legend>

          <!-- Display form errors -->
          {% if form.errors %}
          <div class="alert alert-danger">
            <ul>
              {% for field in form %}
              {% for error in field.errors %}
              <li>{{ error }}</li>
              {% endfor %}
              {% endfor %}
            </ul>
          </div>
          {% endif %}

          <div class="form-group mb-3">
            <label for="{{ form.title.id_for_label }}" class="form-label">Product Title <i class="bi bi-tag"></i></label>
            {{ form.title }}
            {% if form.title.errors %}
            <div class="invalid-feedback">{{ form.title.errors.0 }}</div>
            {% endif %}
          </div>

          <div class="form-group mb-3">
            <label for="{{ form.description.id_for_label }}" class="form-label">Description <i class="bi bi-card-text"></i></label>
            {{ form.description }}
            {% if form.description.errors %}
            <div class="invalid-feedback">{{ form.description.errors.0 }}</div>
            {% endif %}
          </div>

          <div class="form-group mb-3">
            <label for="{{ form.quantity.id_for_label }}" class="form-label">Quantity <i class="bi bi-box-seam"></i></label>
            {{ form.quantity }}
            {% if form.quantity.errors %}
            <div class="invalid-feedback">{{ form.quantity.errors.0 }}</div>
            {% endif %}
          </div>

          <div class="form-group mb-3">
            <label for="{{ form.stock.id_for_label }}" class="form-label">Stock <i class="bi bi-stack"></i></label>
            {{ form.stock }}
            {% if form.stock.errors %}
            <div class="invalid-feedback">{{ form.stock.errors.0 }}</div>
            {% endif %}
          </div>

          <div class="form-group mb-3">
            <label for="{{ form.category.id_for_label }}" class="form-label">Category <i class="bi bi-list"></i></label>
            {{ form.category }}
            {% if form.category.errors %}
            <div class="invalid-feedback">{{ form.category.errors.0 }}</div>
            {% endif %}
          </div>

          <section class="row mb-3">
            <!-- MRP Field -->
            <div class="col-lg-6 col-md-6 mb-3 mb-md-0">
              <div class="form-group">
                <label for="{{ form.mrp.id_for_label }}" class="form-label">MRP <i class="bi bi-currency-dollar"></i></label>
                {{ form.mrp }}
                {% if form.mrp.errors %}
                  <div class="invalid-feedback">{{ form.mrp.errors.0 }}</div>
                {% endif %}
              </div>
            </div>
          
            <!-- Price Field -->
            <div class="col-lg-6 col-md-6">
              <div class="form-group">
                <label for="{{ form.price.id_for_label }}" class="form-label">Price <i class="bi bi-currency-dollar"></i></label>
                {{ form.price }}
                {% if form.price.errors %}
                  <div class="invalid-feedback">{{ form.price.errors.0 }}</div>
                {% endif %}
              </div>
            </div>
          </section>
          
          <!-- Image and Thumbnail fields -->
          <section class="row mb-3">
            <div class="col-lg-6 mb-3 mb-lg-0">
              <div class="form-group">
                <label for="{{ form.image.id_for_label }}" class="form-label">Product Image</label>
                {{ form.image }}
                {% if form.image.errors %}
                <div class="invalid-feedback">{{ form.image.errors.0 }}</div>
                {% endif %}
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="{{ form.thumbnail.id_for_label }}" class="form-label">Product Thumbnail</label>
                {{ form.thumbnail }}
                {% if form.thumbnail.errors %}
                <div class="invalid-feedback">{{ form.thumbnail.errors.0 }}</div>
                {% endif %}
              </div>
            </div>
          </section>

        </fieldset>
        <button type="submit" class="btn btn-success mt-3">Update Product</button>
      </form>
    </div>
  </section>
</main>
{% endblock main %}
