{% extends 'base.html' %}
{% load custom_filters %}
{% load static %}

{% block main %}
<main class="container-lg py-4">
  <section class="row justify-content-center">
    <div class="d-flex justify-content-between col-lg-10 col-md-12">
      <h1 class="display-4 fw-bold mb-4">Products</h1>
      <a href="{% url 'add_product' %}" class="btn btn-success text-decoration-none text-dark fw-bold mt-3 me-4"
        style="height: 40px; padding: 0 20px; line-height: 40px;">
        <span class="text-white">New</span>
      </a>
    </div>
    <div class="col-lg-10 col-md-12">
      <table class="table table-light table-hover table-bordered">
        <thead class="table-secondary">
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th><abbr title="Quantity">Qty.</abbr></th>
            <th>Stock</th>
            <th>MRP</th>
            <th>Price</th>
            <th>Category</th>
            <th>Image</th>
            <th class="text-primary text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for pro in products %}
          <tr>
            <th>{{ forloop.counter }}</th>
            <th>{{ pro.title }}</th>
            <th>{{ pro.quantity }}</th>
            <th>{{ pro.stock }}</th>
            <th>{{ pro.mrp }}</th>
            <th>{{ pro.price }}</th>
            <th>{{ pro.category.category_name }}</th>
            <th>
              {% if pro.image and pro.image.url|file_exists %}
              <img src="{{ pro.image.url }}" alt="{{ pro.title }}"class="img-fluid" style="max-width: 50px; height: auto;">
              {% else %}
              <img src="{% static 'img/placeholder.jpeg' %}" alt="Image not available"
                style="width: 50px; height: auto;">
              {% endif %}
            </th>
            <th class="text-center">
              <div class="d-flex justify-content-center align-items-center">
                <a class="text-decoration-none" href="{% url 'edit_product' pro.id %}">
                  <abbr title="Edit">
                    <span class="material-icons">edit_note</span>
                  </abbr>
                </a>
                <a class="text-decoration-none ms-3 text-danger" href="{% url 'delete_product' pro.id %}"
                  onclick="return confirm('Are you sure you want to delete this product?');">
                  <abbr title="Delete">
                    <span class="material-icons">delete</span>
                  </abbr>
                </a>
              </div>
            </th>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
</main>
{% endblock main %}