{% extends 'base.html' %}

{% block main %}

<link rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

<main class="container-lg py-4">
  <section class="row">
    <h1 class="display-4 fw-bold mb-4">Categories</h1>

    <!-- Form (will be on right side on lg, but above the table on smaller screens) -->
    <div class="col-lg-4 col-md-12 order-lg-2 mb-3">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Add Category</h5>
          <form action="" method="post">
            <fieldset>
              {% csrf_token %}
              {{ form }}
            </fieldset>
            <button type="submit" class="btn btn-primary mt-3">Submit</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Table (full width on small screens, and aligned left on large screens) -->
    <div class="col-lg-8 col-md-12 order-lg-1">
      <table class="table table-light table-hover table-bordered">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>No. of Products</th>
            <th class="text-primary text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for cat in category %}
          
          <tr>
            <td>{{ cat.id }}</td>
            <td>{{ cat.category_name }}</td>
            <td>{{ cat.no_of_products }}</td>
            <td class="text-center d-flex justify-content-center align-items-center">
              <a class="text-decoration-none" href="{% url 'catg_update_view' cat.id %}">
                <span class="material-symbols-outlined">edit_note</span>
              </a>

              <a class="text-decoration-none ms-3 text-danger" href="{% url 'catg_delete_view' cat.id %}"
                onclick="return confirmDelete();">
                <span class="material-symbols-outlined">delete</span>
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </section>
</main>

<script type="text/javascript">
  function confirmDelete() {
    return confirm('Are you sure you want to delete this category?');
  }
</script>

{% endblock main %}